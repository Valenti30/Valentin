<!DOCTYPE html>
<html lang="es">
<head>
<title> eBOARD </title>
<meta charset="UTF-8">
<meta name="viewport" content="widht=device-widht, user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1">
<link href="css/estiloWebUsuario.css" type="text/css" rel="stylesheet">
<link rel="stylesheet" href="css/login.css">
<script src="js/login.js"></script>
<script>
let socket = new WebSocket("ws://127.0.0.1:9990");

socket.onopen = function(e) {
  console.log("[open] Connection established");
  console.log("Sending to server");
  socket.send('{"message":"Entra"}');
  console.log("Conexion abierta");
};


var g_idMensaje = 0;
var id_jugador = 0;
var id_staff = 0;

function dameIdMensaje()
{
    g_idMensaje++;
    return g_idMensaje;
}

function crearJugador()
{
    id_jugador++;
    var id_mensaje = dameIdMensaje();

    var mensajeJSON = {action: "crearJugador", id: id_mensaje, idJugador: id_jugador};
    socket.send(JSON.stringify(mensajeJSON));

}

function crearStaff()
{
    id_staff++;
    var id_mensaje = dameIdMensaje();

    var mensajeJSON = {action: "crearStaff", id: id_mensaje, idStaff: id_staff};
    socket.send(JSON.stringify(mensajeJSON));

}
function iniciarSesion()
{
    var nombre=document.getElementById("usuario_login").value;
    var pass=document.getElementById("contrasenya_login").value;
    var Json = {action: "iniciarSesion",nombre: nombre, contrasenya: pass};
    socket.send(JSON.stringify(Json));
    
    console.log(nombre);
    console.log(pass);
}

socket.onmessage = function(event) {     //Lo que ejecutamos cuando se recibe un mensaje.
  //console.log(`[message] Data received from server: ${event.data}`);
  var object = JSON.parse(event.data);
  if(object.action == "responseCrearJugador")
  {
    console.log(object.respuesta);
    console.log(object.datos);
  }
  if(object.action == "responseCrearStaff")
  {
    console.log(object.respuesta);
    console.log(object.datos);
  }


  //document.getElementById("received_messages").innerHTML += "<div>" + object.message + "</div>";

};

socket.onclose = function(event) {
  if (event.wasClean) {
    console.log(`[close] Connection closed cleanly, code=${event.code} reason=${event.reason}`);
  } else {
    // e.g. server process killed or network down
    // event.code is usually 1006 in this case
    console.log('[close] Connection died');
  }
};

socket.onerror = function(error) {
  alert(`[error] ${error.message}`);
};
</script>
</head>
<body>
<h1>eBOARD </h1>
    <header>
    	<nav class="menuCSS3">
		<ul>
			<li><a href="#">Menú</a>
				<ul>
					<li><a href="#">Mi equipo</a></li>
					<li><a href="#">Mi staff</a></li>
				</ul>
			</li>
			<li><a href="#">Crear</a>
				<ul>
					<li><a href="#">Crear jugador</a></li>
					<li><a href="#">Crear personal staff</a></li>
				</ul>
			</li>
			<li><a href="#">Entrenamiento</a>
				<ul>
					<li><a href="#">Marcador</a></li>
				</ul>
			<li><a href="#">Equipos</a>
				<ul>
					<li><a href="#">Contrarios</a></li>
					<li><a href="#">Crear equipo visitante</a></li>
				</ul>
			</li>
			<li><a href="#">Configuración</a>
				<ul>
					<li><a href="#">Estadísticas temporada</a></li>
					<li><a href="#">Estadísticas partido anterior</a></li>
					<li><a href="#">Análisis tiro temporada</a></li>
					<li><a href="#">Análisis tiro jugador</a></li>
				</ul>
			</li>
		</ul>
	</nav>
   <!-- Button to open the modal login form -->
<button onclick="document.getElementById('id01').style.display='block'">Login</button>
<!-- The Modal -->
<div id="id01" class="modal">
<center><h1> eBOARD </h1></center>
  <span onclick="document.getElementById('id01').style.display='none'"
class="close" title="Close Modal">&times;</span>

  <!-- Modal Content -->
  <div class="modal-content animate" action="/action_page.php">
    <div class="imgcontainer">
      <img src="img/img_avatar2.png" alt="Avatar" class="avatar">
       </div>
          <div  class="container" align="left"> 
            <label class="datos" for="uname"><b>Username</b></label>
            <input id="usuario_login" type="text" placeholder="Enter Username" name="uname" required>
            <br>
            <br>
            <br>
            <label for="psw"><b>Password</b></label>
            <input id="contrasenya_login" type="password" placeholder="Enter Password" name="psw" required>
            <br>
            <br>
            <button id="log" onclick="cerrarCapa()">Login</button>
            <br>
            <label>
                <input type="checkbox" checked="checked" name="remember"> Remember me
            </label><br><br>
            <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
            <span class="psw">Forgot <a href="#">password?</a></span>
        </div> 
    </div>
</div> 
No estás logueado
</header>
</body>
</html>




